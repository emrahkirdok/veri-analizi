---
title: "Veri Bilimine Giriş"
author: "Emrah Kırdök, Ph. D."
date: "16/02/2022"
output:
  bookdown::html_document2:
  bookdown::pdf_document2:
    template: ../resources/templates/eisvogel.tex
    keep_md: yes
    toc: false
    pandoc_args:
    - --filter
    - /Users/quatta/miniconda3/bin/pandoc-latex-environment
bibliography: bibliography.bib
lang: tr
header-includes: |
  ```{=latex}
  \usepackage{awesomebox}
  ```
pandoc-latex-environment:
  noteblock: [note]
  tipblock: [tip]
  warningblock: [warning]
  cautionblock: [caution]
  importantblock: [important]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

# Bilimsel araştırmaya nasıl başlarız?

Karl Popper, **Bilimsel Araştırmanın Mantığı** isimli kitabının birinci Almanca baskısının önsözünde şöyle yazmıştır [@Popper]:

> Araştırma, deyim yerindeyse damdan düşer gibi başlar; çünkü düşecek bir "dam" vardır.

**Damdan düşmek** terimi bence güzel bir metafor; çünkü bilimsel araştırma aslında aklımıza takılan bir soruyla başlıyor. Bu soru oldukça sezgisel - ve kişisel deneyimlerimce - nasıl olduğunu anlamadığınız bir şekilde ortaya çıkıyor. Yani bir anlamda, hiç sebep yokken bir anda kendinizi çözmeniz gereken bir soruyla baş başa buluyorsunuz - yani **damdan düşüyorsunuz.**  

Ancak, bilimde her şeyin bir kuralı olduğu gibi, **damdan düşme**nin de bir kuralı var. Biz buna bilimsel araştırma yöntemi diyoruz. Genel olarak aslında bilimin çalışma prensiplerinden bir tanesi de diyebiliriz.

Peki nasıl işliyor? Genel bir çerçeve çizmek gerekirse:

+ Gözlem
+ Gözlemlere dayanarak hipotez kurulması
+ Deneysel metodoloji ve teorinin testi
+ Deney sonucunda elde edilen bulguların tümevarmsal analizi


## Gözlem

Yukarıdaki **damdan düşme** metaforunu ele alalım yine. Bu olay aslında uzun süreli bir gözlem sürecinin ardından bir anda ortaya çıkıyor. Yani ilk adım **gözlem**. Örnek verelim:

Kuğular üzerinde yaptığınız bir gözlem sonucunda, bütün kuğuların beyaz olduğunu gözlemlediniz. Bu gözlem size, dünya üzerindeki bütün kuğuların beyaz olduğunu düşünmenize sebep oldu.

## Gözlemlere dayanarak hipotez oluşturulması

Gözlem sürecinin ardından, hipotez oluşturma süreci ortaya giriyor. Yine kuğu örneğinden gidersek, bu gözlem sonucunda şöyle bir hipotez oluşturdunuz: Dünya üzerindeki bütün kuğular beyazdır. Peki gerçekten öyle mi?

Artık üçüncü adımda geçmeye hazırsınız...

## Teorinin deneysel yöntem ile test edilmesi 

Artık bu teorinizle ilgili bir yönetm geliştirmeniz ve bu teoriniz test etmeniz gerkekir. Tabi kuğu örneği açısından bakarsak, yapmamız gereken şey aslında bir kuğu popülasyonu alarak, elinizdeki kuğuların renklerini tespit etmek. Peki burada sorulabilecek muhtemel bir soru:

::: warning
Acaba dünya üzerindeki bütün kuğuları tek tek inceleyerek renklerini gözlemleyebilir misiniz?
:::

Ne kadar geniş bir arama yaparsanız yapın, eninde sonunda gözünüzden kaçacak bir kuğu olacaktır. Burada bilimin bize sunduğu bir kolaylık ise, dünya üzerindeki kuğu popülasyonundan **rastgele örneklem** ile, küçük bir alt popülasyon oluşturmaktır.

Burada önemli olan anahtar kelimeler: **örneklem** ve **rastgele** olacaktır.

Örneklem olarak tanımladığımız şey esasında, büyük bir popülasyonu temsil eden küçük bir alt popülasyonu tarif edecektir. Peki neden rastgele olmalı? İstatistik biliminde rastgele tanımı gelen olarak, hiç bir yanlılık içermeyen, tamamen körlemesine yapılan iş olarak tanımlanabilir.

::: important
**Rastgele örneklem:** Geniş bir popülasyonu, yanlılık içermeden temsil eden alt popülasyon. Dolayısıyla, elde ettiğimiz alt popülasyondaki her bir örneğin bulunma frekansı, ana popülasyondaki örneklerin bulunma frekanslarına yakınsayacaktır. Bu sayede, rastgele örneklem kullanarak, daha büyük bir popülasyon hakkında yargılara varabiliriz - ya da varabileceğimizi düşünürüz.
:::

Kuğu örneğine geri dönelim o zaman. Dünya üzerindeki geniş kuğu popülasyonundan rastgele bir örneklem almak isterseniz; her coğrafik bölgeden örnek aldığınıza emin olmalısınız. Mesela örnekleminizi sadece Türkiye içerisinden seçerseniz, bu **yanlı** bir örneklemi temsil eder. Ama popülasyonunuzu bütün ülkelerden almaya çalışırsanız, bu daha iyi bir örneklem olacaktır.

## Bilimin temel prensiplerinden bir tanesi: Tümevarım

Peki bu rastgele örneklem ne işimize yarayacak? Elde ettiğimiz bu rastgele örneklem, aslında geniş kuğu popülasyonunu temsil ediyor - ya da biz şimdilik öyle kabul ediyoruz. Dolayısıyla, bu örneklem üzerinde yatpığımız deneyler sonucunda elde ettiğimzi bulguları, genel popülasyonu tanımlamak için kullanabilirz - ya da biz şimdilik öyle kabul ediyoruz.

::: important
**Tümevarım (indüksiyon, induction) ilkesi:** Özel bir önermeden, daha geniş bir sonucun çıkarılmasını tanımlaya  felsefi bir ilke. Bilim özeline bu ilkeyi uygularsak, rastgele örneklem ile alınmış alt popülasyonumuzdan elde ettiğimiz önermeleri, büyük popülasyon hakkında bir yargıya varmak için kullanılması.
:::

Yine kuğu popülasyonuna dönecek olursak; rastgele örneklem ile elde ettiğimiz alt popülasyonu incelediğimizi düşünelim. Bu örneklem içerisindeki kuğuların hepsi beyaz. O zaman tümevarım ilkesini kullanarak, dünya üzerindeki bütün kuğuların beyaz olduğu sonucuna varabiliriz. 

::: warning
Bu noktada bir dakika durun. Sizce bu sonuca varabilir miyiz? 
:::

## Tümervarım sorunu

Dünya üzerinde bir tane siyah kuğu olduğunu düşünün. Eğer biz bu kuğuyu, **rastgele örneklem** içerisinde dahil etmede başarısız olursak; bütün tümavarım çıkarımımız çöker. Çünkü artık, dünya üzerindeki kuğulardan bir tanesinin siyah olduğunu biliyoruz.

Karl Popper, yine aynı kitabında bu sorun üzerine eğiliyor. Ne kadar iyi örneklem alırsak alalım, modern bilimin işleyişinde tümevarım ilkesini kullanmak her zaman doğru sonuçlara varacağmızı garanti etmez.

## Yanlışlanabilirlik ilkesi

Dolayısıyla, modern bilim genel olarak yanlışlanabilirlik ilkesine göre çalışır. Bu ilkeye göre, tümevarımsal çıkarımlarımız aslında belirli bir olasılık düzeyine göre doğru kabul edilir (*p*-değeri) ve yanlışlanana kadar doğrudur.

Yine kuğu örneğine geri dönecek olursa, bütün kuğular beyaz olarak kabul edilirken, 1967 yılında Hollanda'da bir tane siyah kuğu keşfedilmiştir. Dolayısıyla artık bütün kuğular beyaz olmadığı gösterilmiştir.

:::important
Yanlışlanabilirlik ilkesine göre tümevarım çıkımları, yanlışlanana kadar doğru kabul edilir.
:::

# Veri bilimi bu işin neresinde?

Peki bu yazılanların derslerimizle olan ilgisi nedir? Geleneksel bilimsel yöntemin işleyişi genel olarak bir önceki kısımlarda yazdığımız güzergah üzerinde hareket etmektedi. Bu da genel olarka doğa gözlemlerine dayanır.

Örnek vermek gerekirse; antik çağ filozofoları, gözlem yeteneklerini sadece gözlem yeteneklerini kullanarak hipotezler gerliştimiş ve dünyayı kavramamızı sağlamıştır.

Ancak, yaşam bilimlerinde yaşanan hızlı gelişme artık karşımıza farklı bir paradigma çıkarmıştır: **Veri üzerinden gözlem**

Bir önceki dönem Moleküler Biyoloji dersinde yaşamsal bilginin hem nasıl sonraki nesillere hem de aynı zamanda hücre içerisinde aktarıldığını gördük. Bu yaşamsal bilgi aslında sahip oldumuz bütün fenotipten sorumlu. Dolayısıyla, sahip olduğumuz fenotipik özelliklerin bir çoğunun (epigenetik özellikler dışında) kaynağı DNA.

::: important
**Fenotip:** Bir canlılnın sahip olduğu genetik bilginin, anlatıma uğrayarak işlevsel hale gelmiş halidir. Mesela göz rengimizden sorumlu gen bölgesi anlatıma uğradığında, göz rengi fenotipi oluşur.
:::

## Son yıllarda veri artışı var

Yeni nesil dizileme teknolojileri, güncel veri miktarını her gün kat be kat arttırıyır. DNA dizi verisi gene olarka veri tabanlarında tutuluyor. En güncel NCBI SRA veri tabanına baktığımızda bu artışın hızını anlayabiliriz (Şekil \@ref(fig:sra))

```{r sra, warning = FALSE, fig.cap= "SRA veritabanındaki hızlı büyüme. Yeni nesil dizileme teknolojilerinde yaşanan hızlı gelişmeler sayesinde, SRA veritanının güncel büyüklüğü 20bin Terabaytı aşmış durumdadır (erişim tarihi 16/02/2022)"}
library(ggplot2)
sra <- read.csv2("data/sra_stat.csv", sep = ",", stringsAsFactors = FALSE)
sra$date <- as.Date(sra$date, format = "%m/%d/%Y")
ggplot(data = sra, aes(x=date, y= bytes/10^12)) + geom_line() + 
  xlab("Tarih") + ylab("Veri Miktari (TB)") + theme_bw()
```

Bu veri miktarı bize yeni artık doğa yerine, veri üzerinden yeni gözlemler yapabilmemize olanak sağlıyor.

## Peki veri bilimi nasıl işliyor?

Geleneksel yöntemin aksine, artık çıkış noktamız veri. Örnek vermek gerekirse DNA, RNA dizi verisi sıklıkla kullanılan yaşam bilimi verilerindendir. Peki süreç nasıl işliyor? Şöyle özetleyebiliriz:

1. Verinin elde edilmesi
2. Veri üzerinde incelemeler ve modelleme çalışmaları yapılması
3. Oluşturulan modellerin, benzer veri üzerinde test edilmesi

DNA veya RNA dizi versinin nasıl elde edileceğini gelecek sene **Biyoinformatik** dersinde daha ayrıntılı bir şekilde işleyeceğiz. Dolayısıyla, şimdilik daha çok ikinci nokta üzerinde duracağız.

### Verinin incelemesi ve modelleme çalışmaları

Bu amaçla R ve Rstudio platformlarını kullancağız. Bu platformlar bize veri analizi, görselleştirmesi ve modellenmesi konusunda harika imkanlar sağlıyor.

İlk adımda R içerisindeki veri yapılarını öğreneceğiz. Daha sonra R içerisine veriler yükleyerek, tablolar ve grafikler oluşturacağız. Örnek vermek gerekirse, Tablo \@ref(tab:mtcarstb)'da R içerisinde gelen örnek veri setlerinden bir tanesinin tablo haline getirilmiş hali mevcut.

```{r mtcarstb}
kableExtra::kable(x = head(mtcars), format = "latex", caption = "Örnek veri setinden oluşturulmuş tablo")
```

Bu noktadan sonra amacımız, verinin sakladığı hikayeleri incelemek ve bu hikayeleri tanımlayan modeller oluşturmak olacak. Eğer Şekil \@ref(fig:mtcars)'e bakarsanız, örnek veri setindeki iki farklı değişken kullanılarak oluşturulmuş bir modeli görebilirsiniz. 

Eğer matematiksel bir notasyon kullanmak istersek, şekilde görülen çizgiyi aslında şu şekilde ifade edebiliriz:

$$ Y = f(X) + \epsilon $$

```{r mtcars, warning = FALSE, message = FALSE, fig.cap="Örnek veri seti kullanılarak oluşturulmuş bir doğrusal model. Bu model bize, y eksenindeki değerlerin, x eksenindeki değerlerle olan ilişkisini açıklıyor. Ya da başka bir tanımla, x eksenindeki değerleri kullanarak, y eksenindeki değerleri ne kadar doğrulukla tahmin edebiliriz?"}
ggplot(data=mtcars, aes(x=drat, y=mpg)) + geom_point() + 
  xlab("X") + ylab("Y") + geom_smooth(method = "lm") + theme_bw()
```

Tabi, şu anda aklınız karışmış olabilir. Ancak ilerleyen haftalarda aşağıdaki konular üzerinden giderek R ve Rstüdyo programlarını kullanarak veri bilimine giriş yapacağız:

1. R ve RStüdyo kurulumu
2. R üzerinde bulunan temel veri yapıları
3. Veri çerçevleri, matrisler, listeler
4. Tanımlayıcı istatistikler
5. Temel istatistik analizler
6. GGplot2 ile görlselleştirme
7. Doğrusal modeller

# Kaynakça